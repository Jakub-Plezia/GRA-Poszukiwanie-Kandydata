
<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <title>Jakub Plezia - Poszukiwanie Idealnego Kandydata</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body {
      background-color: #001100;
      color: #00FF00;
      font-family: monospace;
      padding: 20px;
    }
    #output {
      white-space: pre-wrap;
      border: 1px solid #00FF00;
      padding: 10px;
      min-height: 140px;
      margin-bottom: 10px;
    }
    #map {
      white-space: pre;
      font-family: monospace;
      border: 1px solid #00FF00;
      padding: 10px;
      display: inline-block;
      margin-top: 10px;
    }
    .controls {
      margin-top: 20px;
      text-align: center;
    }
    .controls button {
      background-color: #003300;
      color: #00FF00;
      border: 1px solid #00FF00;
      font-size: 20px;
      padding: 10px 20px;
      margin: 5px;
    }
    .character-choice {
      border: 1px solid #00FF00;
      padding: 10px;
      margin-bottom: 15px;
      cursor: pointer;
    }
    .character-choice:hover { background: rgba(0,255,0,0.03); }
    .ascii-art {
      color: #00FF00;
      white-space: pre;
      font-family: monospace;
      margin-bottom: 5px;
    }
    #endButtons { margin-top: 12px; }
    #playMusicBtn {
      background: transparent;
      border: 1px solid #00FF00;
      color: #00FF00;
      padding: 8px 12px;
      cursor: pointer;
      display: none;
      margin-top: 8px;
    }
    /* inventory screen */
    #inventoryScreen { display:none; margin-top:10px; }
    .choice { border: 1px solid #00FF00; padding: 10px; margin-bottom: 10px; cursor: pointer; }
    .choice:hover { background: rgba(0,255,0,0.03); }
    .small { font-size: 0.9em; color: #99ff99; }
    .center { text-align:center; }
  </style>
</head>
<body>
  <h1>üëÄ Poszukiwanie Kandydata üëÄ</h1>

  <div id="characterSelect">
    <h2>Witaj w mini-grze. Wybierz swojƒÖ postaƒá:</h2>

    <!-- changed onclick to onCharacterChosen to show inventory next -->
    <div class="character-choice" onclick="onCharacterChosen('Rekruter')">
      <div class="ascii-art">
   ___
  (o o)
   \_/
  --|--
    |
   / \
 [POSZUKIWACZ]
      </div>
      <strong>Rekruter</strong> ‚Äî poszukiwacz talent√≥w
    </div>

    <div class="character-choice" onclick="onCharacterChosen('Szef')">
      <div class="ascii-art">
  \O/
   |
  / \
  ||||
  ||||
 [SZEF]
      </div>
      <strong>W≈Ça≈õciciel / Szef dzia≈Çu</strong>
    </div>

    <div class="character-choice" onclick="onCharacterChosen('Turysta')">
      <div class="ascii-art">
  _o_
 /   \
 |o o|
  \_/
  / \
 [TURYSTA]
      </div>
      <strong>Tylko siƒô rozglƒÖdam</strong>
    </div>
  </div>

  <!-- NEW: Ekran wyboru ekwipunku -->
  <div id="inventoryScreen">
    <h3>Wybierz ekwipunek:</h3>
    <div id="inventoryOptions"></div>
    <div class="small">Wybrany ekwipunek wp≈Çynie na ko≈Ñcowy komunikat gry.</div>
    <div style="margin-top:10px;">
      <button onclick="cancelInventory()">‚§∫ Wr√≥ƒá</button>
    </div>
  </div>

  <div id="game" style="display:none;">
    <div id="output"></div>
    <div id="map"></div>

    <div class="controls">
      <div><button onclick="move('up')">‚¨ÜÔ∏è</button></div>
      <div>
        <button onclick="move('left')">‚¨ÖÔ∏è</button>
        <button onclick="move('down')">‚¨áÔ∏è</button>
        <button onclick="move('right')">‚û°Ô∏è</button>
      </div>
      <button id="playMusicBtn" onclick="tryPlayMusic()">W≈ÇƒÖcz muzykƒô</button>
    </div>

    <div id="ascii" class="ascii-art"></div>
    <div id="endButtons"></div>
  </div>

  <audio id="bgMusic" loop></audio>

  <script>
    const output = document.getElementById("output");
    const mapDiv = document.getElementById("map");
    const asciiDiv = document.getElementById("ascii");
    const music = document.getElementById("bgMusic");
    const playMusicBtn = document.getElementById("playMusicBtn");
    const endButtons = document.getElementById("endButtons");
    const inventoryScreen = document.getElementById("inventoryScreen");
    const inventoryOptions = document.getElementById("inventoryOptions");

    const mapSize = 5;
    let player = { x: 2, y: 2 };
    let greenMushroom = {};
    let discovered = [];
    let characterName = "";
    let chosenItem = "";
    let gameOver = false;
    let moveCount = 0;

    const locations = [
      "gdzie potrzebne jest do≈õwiadczenie w zarzƒÖdzaniu zespo≈Çami üöÄ. \nS≈Çysza≈Çe≈õ, ≈ºe Legendarny Kandydat ma wieloletnie do≈õwiadczenie z zarzƒÖdzaniu Zespo≈Çami w obszarze us≈Çug IT, produkt√≥w - Software jak r√≥wnie≈º w bankowo≈õci\n ",
      "gdzie wa≈ºne jest aby mieƒá umiejƒôtno≈õci komunikacyjne üßê \nPoszukiwany Kandydat ma do≈õwiadczenie w kontaktach z Klientami wewnƒôtrznymi oraz zewnƒôtrznymi\n ",
      "w kt√≥rym potrzebnƒÖ sƒÖ umiejƒôtno≈õci analityczne üß©\nNa ko≈Ñcu gry poznasz Kandydata, kt√≥ry jest data-driven proffesional\n ",
      "gdzie potrzebujesz osoby z Krakowa lub zdalnie üåé\nKandydat otwarty jest na pracƒô hybrydowƒÖ lub zdalnƒÖ\n ",
      "w kt√≥rym potrzebne jest do≈õwiadczenie w nowych technologiach üíª\n ",
      "w kt√≥rym wspo≈Çpraca jest kluczowa ü§úü§õ\nKultura feedbacku jest w jego DNA\n ",
      "gdzie wa≈ºna jest szybka dostƒôpno≈õƒá kandydata üóì\nKandydat jest dostƒôpny ASAP\n ",
      "w kt√≥rym znajomo≈õƒá bran≈ºy outsourcingu technologicznego to du≈ºy plus ‚úî\nTechnologie to to co interesuje kandydata - od zawsze  role by≈Çy z nimi zwiƒÖzane\n ",
      "w kt√≥rym sukcesy w rozwijaniu biznesu to klucz üîë\nporozmawiajmy o moich sukcesach w rozwoju bieznesu!\n ",
      "w kt√≥rym kreatywno≈õƒá jest czƒô≈õciƒÖ roli do kt√≥rej rekrutujesz üé®\nChyba ta gra m√≥wi sama za siebie;)\n ",
    ];

    const musicTracks = [
      "https://www.epidemicsound.com/track/fJfKIlxgCG/"
    ];

    // inventory options per character
    const inventoryByCharacter = {
      'Rekruter': [
        { id: 'lupa_menadzer', title: 'üîç Lupa poszukiwacza menagera zespo≈Çu', ascii: 'LUPA' },
        { id: 'szkielko_lider', title: 'üî¨ Szkie≈Çko poszukiwacza lidera biznesowego', ascii: 'SZKIE≈ÅKO' }
      ],
      'Szef': [
        { id: 'orez_lider', title: 'ü•á Order reagujƒÖcy na sprawdzonego lidera biznesowego', ascii: 'ORDER' },
        { id: 'berlo_perfect', title: 'üîÆ Ber≈Ço wyczuwajƒÖce perfect match', ascii: 'BER≈ÅO' }
      ],
      'Turysta': [
        { id: 'mapa', title: 'üó∫ Mapa ciekawo≈õci', ascii: ' MAPA' }
      ]
    };

    // When character is chosen - show inventory options instead of starting immediately
    function onCharacterChosen(kind){
      characterName = kind;
      document.getElementById('characterSelect').style.display = 'none';
      inventoryScreen.style.display = 'block';
      renderInventoryOptions(kind);
    }

    function renderInventoryOptions(kind){
      inventoryOptions.innerHTML = '';
      const list = inventoryByCharacter[kind] || [];
      list.forEach(item => {
        const div = document.createElement('div');
        div.className = 'choice';
        div.innerHTML = `<div class="ascii-art">${item.ascii}</div><strong>${item.title}</strong>`;
        div.onclick = () => pickItem(item);
        inventoryOptions.appendChild(div);
      });
    }

    function pickItem(item){
      chosenItem = item.title;
      // for Turysta, if mapa chosen we'll later add the share text on finish (handled in showLocation)
      inventoryScreen.style.display = 'none';
      document.getElementById('game').style.display = 'block';
      // start game (initialize variables)
      player = { x: 2, y: 2 };
      greenMushroom = { x: Math.floor(Math.random()*mapSize), y: Math.floor(Math.random()*mapSize) };
      discovered = Array.from({length:mapSize},()=>Array(mapSize).fill(false));
      discovered[player.x][player.y] = true;
      gameOver = false;
      moveCount = 0;
      asciiDiv.textContent = '';
      endButtons.innerHTML = '';
      output.textContent = `Wybra≈Çe≈õ postaƒá: ${characterName} ‚Äî ${chosenItem}\nROZPOCZNIJ GRƒò. Steruj strza≈Çkami lub przyciskami.`;

      const randomTrack = musicTracks[Math.floor(Math.random()*musicTracks.length)];
      music.src = randomTrack;
      music.play().then(()=>{ playMusicBtn.style.display='none'; }).catch((e)=>{ playMusicBtn.style.display='inline-block'; });

      showLocation();
    }

    function cancelInventory(){
      inventoryScreen.style.display='none';
      document.getElementById('characterSelect').style.display='block';
      characterName='';
    }

    function tryPlayMusic(){
      music.play().then(()=>{ playMusicBtn.style.display='none'; }).catch(()=>{ alert('Kliknij jeszcze raz, przeglƒÖdarka zablokowa≈Ça autoplay.'); });
    }

    function describeLocation(x, y){
      const index = (x * mapSize + y) % locations.length;
      return locations[index];
    }

    function showMap(){
      let mapText = '';
      for(let i=0;i<mapSize;i++){
        for(let j=0;j<mapSize;j++){
          if(i===player.x && j===player.y) mapText += ' üòé';
          else if(discovered[i][j] && i===greenMushroom.x && j===greenMushroom.y) mapText += 'üíé ';
          else if(discovered[i][j]) mapText += ' . ';
          else mapText += ' ? ';
        }
        mapText += '\n';
      }
      mapDiv.textContent = mapText;
    }

    function showLocation(){
      discovered[player.x][player.y] = true;
      const loc = describeLocation(player.x, player.y);
      output.textContent += `\nJeste≈õ w miejscu: ${loc}. (${player.x},${player.y})`;

      if(player.x===greenMushroom.x && player.y===greenMushroom.y && !gameOver){
        if(moveCount < 5){
          output.textContent += `\n\nüéØ Znalaz≈Çe≈õ kandydata, ale musisz wykonaƒá przynajmniej 5 ruch√≥w. Wykona≈Çe≈õ: ${moveCount}. Wykonaj brakujƒÖce ruchy i wr√≥ƒá na mapie na ikonƒô: üíé\n `;
        } else {
          gameOver = true;
          asciiDiv.textContent = `
 ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà    ‚ñà‚ñà ‚ñà‚ñà       ‚ñà‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà      ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà    ‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà       ‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà     ‚ñà‚ñà   ‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà    ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà    ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà  
‚ñà‚ñà       ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà ‚ñà‚ñà      ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà           ‚ñà‚ñà ‚ñà‚ñà             ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà      ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà‚ñà  ‚ñà‚ñà      ‚ñà‚ñà      ‚ñà‚ñà          ‚ñà‚ñà  ‚ñà‚ñà  ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà  ‚ñà‚ñà  ‚ñà‚ñà  ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà   ‚ñà‚ñà 
‚ñà‚ñà   ‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà ‚ñà‚ñà      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà           ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà         ‚ñà‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà  ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà   ‚ñà‚ñà      ‚ñà‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà     ‚ñà‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà ‚ñà‚ñà  ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 
‚ñà‚ñà    ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà ‚ñà‚ñà      ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà      ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà           ‚ñà‚ñà‚ñà    ‚ñà‚ñà  ‚ñà‚ñà ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà      ‚ñà‚ñà   ‚ñà‚ñà  ‚ñà‚ñà‚ñà    ‚ñà‚ñà      ‚ñà‚ñà           ‚ñà‚ñà     ‚ñà‚ñà  ‚ñà‚ñà  ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà  ‚ñà‚ñà ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà   ‚ñà‚ñà 
 ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà     ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà     ‚ñà‚ñà    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà   ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà   ‚ñà‚ñà 
`;
          // build end message
          let endText = `\n\nüéâ GRATULACJE! Znalaz≈Çe≈õ LEGENDARNEGO KANDYDATA! üåü\nTw√≥j wynik: ${moveCount} ruch√≥w\n`;
          if(chosenItem){
            endText += `${chosenItem} ‚Äî ten przedmiot l≈õni i dr≈ºy ‚Äî ten kandydat to perfect match!\nMo≈ºesz siƒô z nim skontaktowaƒá poprzez LINKEDIN: üëãüëã https://www.linkedin.com/in/jakub-plezia/\ \nKoniec gry.\n++++++++++++++++++++++++++++++++++++++++++++++++++
++++++++++++++++++++++++++++++++++++++++++++++++++
++++++++++++++*#*+***#++++*+++++++++++++++++++++++
++++++++*#+*%%%#%%%%@%%%%%#+##++*+++++++++++++++++
+++++++##%#@@%@@@@@@@%@@@%%%%#*%%+++++++++++++++++
++++**%%@@@@@@@@@@@@@@@@@@@%%@%%%+#%++++++++++++++
++++##@@@@@@@@@@@@@@@@@@@@@@@@%%%%%***++++++++++++
++*+@@@@@@@@@@@@@@@@@%%@@@@@@@@%@%%%%*++++++++++++
+*#@@@@@@@@@@@@%%%%%@@@@%%@@@@@@@@@%*+++++++++++++
+*%@@@@@@@@@@#++=---=+#%@%@@@@@@@@%#++++++++++++++
+%@@@@@@@@@%*+++=------++%+*#@@@@%##*+++++++++++++
+@@@@@@@@@@%*+++====------===+*@@@*+++++++++++++++
*%@@@@@@@@@%*+*##%@@@%+--==---=%#%**++++++++++++++
+#@@@@@@@%#*++*@%*---=+#*===---*++++=+++++++++++++
=+%@%%#*++****+*%*+==-:::=%###%%#+================
==#****#%%+++++*%*+++==---#%%*---=##+=============
=+******##++++++##++++==+##++*==--+%+=============
=****##*##+++++=+#%#**++##+++=++==#+==============
==+**##**%*+*++----======+++**++=**===============
==+****##@#++**=---======+****+**+================
====**++#@%*++++=#%%#%%%%%%#%*+===================
=====**#%@@@%#*#%%%=-======++%*===================
----=++*#@@@@@@@@%%=--=+**+-=%*=------=-==========
----=++*#@@@@@@@@%%%*==#@@%+%%*-----------------=-
----=*+**#@@@@@@@@@%%%%%%%%%%%*-------------------
----+*++***#%@@@@@@@@%%%%%%@%%*-------------------
----*+++**+*##%@@@@@@@@@@%%%@%+-------------------
--+**++++**++*###%@@@@@@@@@@%=--------------------
*****+++++*++++*#####%@%%#*=----------------------
+*****+++*+++=+++++*++=---------------------------
**++*******=+=--=+====+***************************
****++****#+=+=------*++=*************+++*********
==++=++++=+++=*=---===+=++==+***+++++++**++++*****
----=--=++-----====+*+--=++-----+*******+++++++**+ \nüëçLIKE üîÑSHARE üí¨COMMENT - akcja #OPEN TO WORK`;
          }
          if(characterName === 'Turysta' && chosenItem.toLowerCase().includes('map')){
            endText += `\nüó∫ Udostƒôpnij post - poszerz zasiƒôgi\n`;
          }
          endText += `\nKoniec gry.`;
          output.textContent += endText;

          endButtons.innerHTML = `
            <button onclick="restartSame()">Zagraj ponownie (ta sama postaƒá)</button>
            <button onclick="restartNew()">Wybierz innƒÖ postaƒá</button>
          `;
        }
      }
      showMap();
    }

    function move(direction){
      if(gameOver) return;
      let moved=false;
      if(direction==='up' && player.x>0){ player.x--; moved=true; }
      else if(direction==='down' && player.x<mapSize-1){ player.x++; moved=true; }
      else if(direction==='left' && player.y>0){ player.y--; moved=true; }
      else if(direction==='right' && player.y<mapSize-1){ player.y++; moved=true; }

      if(moved){
        moveCount++;
        showLocation();
      }
    }

    function restartSame(){
      // restart: same character & same chosen item
      player = { x: 2, y: 2 };
      greenMushroom = { x: Math.floor(Math.random()*mapSize), y: Math.floor(Math.random()*mapSize) };
      discovered = Array.from({length:mapSize},()=>Array(mapSize).fill(false));
      discovered[player.x][player.y] = true;
      gameOver = false;
      moveCount = 0;
      asciiDiv.textContent='';
      endButtons.innerHTML='';
      output.textContent = `Wybra≈Çe≈õ postaƒá: ${characterName} ‚Äî ${chosenItem}\nROZPOCZNIJ GRƒò.`;
      music.play().then(()=>{ playMusicBtn.style.display='none'; }).catch(()=>{ playMusicBtn.style.display='inline-block'; });
      showLocation();
    }

    function restartNew(){
      // back to character selection
      document.getElementById('characterSelect').style.display='block';
      document.getElementById('game').style.display='none';
      inventoryScreen.style.display='none';
      chosenItem='';
      characterName='';
      moveCount=0;
      output.textContent='';
      asciiDiv.textContent='';
      endButtons.innerHTML='';
      playMusicBtn.style.display='none';
      try{ music.pause(); music.currentTime=0; }catch(e){}
    }

    // key controls
    document.addEventListener('keydown', function(e){
      if(gameOver) return;
      if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight'].includes(e.key)){
        switch(e.key){
          case 'ArrowUp': move('up'); break;
          case 'ArrowDown': move('down'); break;
          case 'ArrowLeft': move('left'); break;
          case 'ArrowRight': move('right'); break;
        }
      }
    });
  </script>
</body>
</html>





