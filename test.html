<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <title>Poszukiwanie Idealnego Kandydata</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body {
      background-color: #001100;
      color: #00FF00;
      font-family: monospace;
      padding: 20px;
    }
    #output {
      white-space: pre-wrap;
      border: 1px solid #00FF00;
      padding: 10px;
      min-height: 140px;
      margin-bottom: 10px;
    }
    #map {
      white-space: pre;
      font-family: monospace;
      border: 1px solid #00FF00;
      padding: 10px;
      display: inline-block;
      margin-top: 10px;
    }
    .controls {
      margin-top: 20px;
      text-align: center;
    }
    .controls button {
      background-color: #003300;
      color: #00FF00;
      border: 1px solid #00FF00;
      font-size: 20px;
      padding: 10px 20px;
      margin: 5px;
    }
    .character-choice {
      border: 1px solid #00FF00;
      padding: 10px;
      margin-bottom: 15px;
      cursor: pointer;
    }
    .character-choice:hover { background: rgba(0,255,0,0.03); }
    .ascii-art {
      color: #00FF00;
      white-space: pre;
      font-family: monospace;
      margin-bottom: 5px;
    }
    #endButtons { margin-top: 12px; }
    #playMusicBtn {
      background: transparent;
      border: 1px solid #00FF00;
      color: #00FF00;
      padding: 8px 12px;
      cursor: pointer;
      display: none;
      margin-top: 8px;
    }
  </style>
</head>
<body>
  <h1>ğŸ‘€ Poszukiwanie Kandydata ğŸ‘€</h1>

  <div id="characterSelect">
    <h2>Wybierz swojÄ… postaÄ‡:</h2>

    <div class="character-choice" onclick="startGame('Rekturet (poszukiwacz talentÃ³w)')">
      <div class="ascii-art">
   ___
  (o o)
   \_/
  --|--
    |
   / \
 [POSZUKIWACZ]
      </div>
      <strong>Rekturet</strong> â€” poszukiwacz talentÃ³w
    </div>

    <div class="character-choice" onclick="startGame('WÅ‚aÅ›ciciel / Szef dziaÅ‚u')">
      <div class="ascii-art">
  \O/
   |
  / \
  ||||
  ||||
 [SZEF]
      </div>
      <strong>WÅ‚aÅ›ciciel / Szef dziaÅ‚u</strong>
    </div>

    <div class="character-choice" onclick="startGame('Tylko siÄ™ rozglÄ…dam')">
      <div class="ascii-art">
  _o_
 /   \
 |o o|
  \_/
  / \
 [TURYSTA]
      </div>
      <strong>Tylko siÄ™ rozglÄ…dam</strong>
    </div>
  </div>

  <div id="game" style="display:none;">
    <div id="output"></div>
    <div id="map"></div>

    <div class="controls">
      <div><button onclick="move('up')">â¬†ï¸</button></div>
      <div>
        <button onclick="move('left')">â¬…ï¸</button>
        <button onclick="move('down')">â¬‡ï¸</button>
        <button onclick="move('right')">â¡ï¸</button>
      </div>
      <button id="playMusicBtn" onclick="tryPlayMusic()">WÅ‚Ä…cz muzykÄ™</button>
    </div>

    <div id="ascii" class="ascii-art"></div>
    <div id="endButtons"></div>
  </div>

  <audio id="bgMusic" loop></audio>

  <script>
    const output = document.getElementById("output");
    const mapDiv = document.getElementById("map");
    const asciiDiv = document.getElementById("ascii");
    const music = document.getElementById("bgMusic");
    const playMusicBtn = document.getElementById("playMusicBtn");
    const endButtons = document.getElementById("endButtons");

    const mapSize = 5;
    let player = { x: 2, y: 2 };
    let greenMushroom = {};
    let discovered = [];
    let characterName = "";
    let gameOver = false;

    const locations = [
      "mroczny zagajnik",
      "mokradÅ‚o peÅ‚ne komarÃ³w",
      "stare dÄ™by",
      "polana ciszy",
      "zaroÅ›niÄ™ta Å›cieÅ¼ka",
      "dziwna mgÅ‚a",
      "pajÄ™czyna miÄ™dzy drzewami",
      "ruczaj szepczÄ…cy",
      "mrowisko olbrzymÃ³w",
      "ruiny szaÅ‚asu",
    ];

    // Muzyka (darmowe utwory) - jeÅ›li ktÃ³ryÅ› link nie dziaÅ‚a, przycisk "WÅ‚Ä…cz muzykÄ™" pozwoli rÄ™cznie uruchomiÄ‡.
    const musicTracks = [
      "https://files.freemusicarchive.org/storage-freemusicarchive-org/music/no_curator/Komiku/Its_time_for_adventure/Komiku_-_01_-_Its_time_for_adventure.mp3",
      "https://files.freemusicarchive.org/storage-freemusicarchive-org/music/no_curator/Komiku/Poupis_Theme/Komiku_-_02_-_Poupis_Theme.mp3",
      "https://files.freemusicarchive.org/storage-freemusicarchive-org/music/no_curator/Komiku/The_Adventure/Komiku_-_The_Adventure.mp3"
    ];

    function startGame(chosenCharacter) {
      characterName = chosenCharacter;
      document.getElementById("characterSelect").style.display = "none";
      document.getElementById("game").style.display = "block";

      // reset
      player = { x: 2, y: 2 };
      greenMushroom = {
        x: Math.floor(Math.random() * mapSize),
        y: Math.floor(Math.random() * mapSize)
      };
      discovered = Array.from({ length: mapSize }, () => Array(mapSize).fill(false));
      discovered[player.x][player.y] = true;
      gameOver = false;
      asciiDiv.textContent = "";
      endButtons.innerHTML = "";
      output.textContent = `WybraÅ‚eÅ› postaÄ‡: ${characterName}\nTwoim celem jest znalezienie legendarnego ZIELONEGO GRZYBA.`;

      // muzyka
      const randomTrack = musicTracks[Math.floor(Math.random() * musicTracks.length)];
      music.src = randomTrack;
      // PrÃ³ba odtworzenia (wywoÅ‚anie startGame jest wynikiem klikniÄ™cia - powinno byÄ‡ OK), ale i tak obsÅ‚uÅ¼ymy reject.
      music.play().then(()=>{
        playMusicBtn.style.display = "none";
      }).catch((err)=>{
        // JeÅ›li odtwarzanie zablokowane, pokaÅ¼ przycisk, Å¼eby uÅ¼ytkownik dotknÄ…Å‚ ekran i odblokowaÅ‚
        console.log("Autoplay zablokowane:", err);
        playMusicBtn.style.display = "inline-block";
      });

      showLocation();
    }

    function tryPlayMusic(){
      music.play().then(()=>{
        playMusicBtn.style.display = "none";
      }).catch(err=>{
        alert("Nie udaÅ‚o siÄ™ odtworzyÄ‡ muzyki. SprÃ³buj kliknÄ…Ä‡ jeszcze raz lub sprawdÅº ustawienia przeglÄ…darki.");
        console.log(err);
      });
    }

    function describeLocation(x, y) {
      const index = (x * mapSize + y) % locations.length;
      return locations[index];
    }

    function showMap() {
      let mapText = "";
      for (let i = 0; i < mapSize; i++) {
        for (let j = 0; j < mapSize; j++) {
          if (i === player.x && j === player.y) {
            mapText += "P ";
          } else if (discovered[i][j] && i === greenMushroom.x && j === greenMushroom.y) {
            mapText += "G ";
          } else if (discovered[i][j]) {
            mapText += ". ";
          } else {
            mapText += "? ";
          }
        }
        mapText += "\n";
      }
      mapDiv.textContent = mapText;
    }

    function showLocation() {
      discovered[player.x][player.y] = true;
      const loc = describeLocation(player.x, player.y);
      output.textContent += `\nJesteÅ› w miejscu: ${loc}. (${player.x},${player.y})`;

      if (player.x === greenMushroom.x && player.y === greenMushroom.y && !gameOver) {
        gameOver = true;
        output.textContent += `\n\n`;
        // Nowe ASCII-art gratulacyjne (podmienione zgodnie z Twoim tekstem)
        asciiDiv.textContent = `
 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ    â–ˆâ–ˆ â–ˆâ–ˆ       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆ    â–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆ       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–ˆâ–ˆ   â–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ    â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆ    â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  
â–ˆâ–ˆ       â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ â–ˆâ–ˆ      â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ           â–ˆâ–ˆ â–ˆâ–ˆ             â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ      â–ˆâ–ˆ   â–ˆâ–ˆ    â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆ      â–ˆâ–ˆ      â–ˆâ–ˆ          â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ   â–ˆâ–ˆ 
â–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ â–ˆâ–ˆ      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ           â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ         â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆ      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 
â–ˆâ–ˆ    â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ â–ˆâ–ˆ      â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ      â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ           â–ˆâ–ˆâ–ˆ    â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ      â–ˆâ–ˆ   â–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ    â–ˆâ–ˆ      â–ˆâ–ˆ           â–ˆâ–ˆ     â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ   â–ˆâ–ˆ 
 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ    â–ˆâ–ˆ     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–ˆâ–ˆ    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆ   â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ   â–ˆâ–ˆ 
                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                         
`;
        output.textContent += `\nğŸ‰ GRATULACJE! ZnalazÅ‚eÅ› LEGENDARNEGO KANDYDATA! ğŸŒŸ\nKoniec gry.`;
        // PokaÅ¼ przyciski koÅ„cowe: restart i wybÃ³r postaci
        endButtons.innerHTML = `
          <button onclick="restartSame()">Zagraj ponownie (ta sama postaÄ‡)</button>
          <button onclick="restartNew()">Wybierz innÄ… postaÄ‡</button>
        `;
        // zatrzymaj reagowanie na klawisze - ale zostaw je dziaÅ‚ajÄ…ce dla restartu
      }
      showMap();
    }

    function restartSame(){
      // restart gry zachowujÄ…c tÄ™ samÄ… postaÄ‡
      document.getElementById("game").style.display = "block";
      document.getElementById("characterSelect").style.display = "none";
      // zresetuj pola i ustaw nowÄ… pozycjÄ™ grzyba
      player = { x: 2, y: 2 };
      greenMushroom = {
        x: Math.floor(Math.random() * mapSize),
        y: Math.floor(Math.random() * mapSize)
      };
      discovered = Array.from({ length: mapSize }, () => Array(mapSize).fill(false));
      discovered[player.x][player.y] = true;
      gameOver = false;
      asciiDiv.textContent = "";
      endButtons.innerHTML = "";
      output.textContent = `WybraÅ‚eÅ› postaÄ‡: ${characterName}\nTwoim celem jest znalezienie legendarnego KANDYDATA.`;
      // sprÃ³buj wznowiÄ‡ muzykÄ™
      music.play().then(()=>{ playMusicBtn.style.display = "none"; }).catch(()=>{ playMusicBtn.style.display = "inline-block"; });
      showLocation();
    }

    function restartNew(){
      // powrÃ³t do wyboru postaci
      document.getElementById("game").style.display = "none";
      document.getElementById("characterSelect").style.display = "block";
      // zatrzymaj muzykÄ™
      try{ music.pause(); music.currentTime = 0; }catch(e){}
    }

    function move(direction) {
      if (gameOver) return;
      let moved = false;
      if (direction === "up" && player.x > 0) { player.x--; moved = true; }
      else if (direction === "down" && player.x < mapSize - 1) { player.x++; moved = true; }
      else if (direction === "left" && player.y > 0) { player.y--; moved = true; }
      else if (direction === "right" && player.y < mapSize - 1) { player.y++; moved = true; }

      if (moved) showLocation();
    }

    function handleKey(event) {
      if (event.key === "ArrowUp") move("up");
      else if (event.key === "ArrowDown") move("down");
      else if (event.key === "ArrowLeft") move("left");
      else if (event.key === "ArrowRight") move("right");
    }

    document.addEventListener("keydown", handleKey);
  </script>
</body>
</html>